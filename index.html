<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KB PARK | æ„‰å¿«ãªã‚¹ã‚¿ãƒƒãƒ•ãŸã¡</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .staff-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 30px; padding: 20px; max-width: 1000px; margin: 0 auto; padding-bottom: 50px; }
        .staff-card-container { perspective: 1000px; cursor: pointer; -webkit-tap-highlight-color: transparent; }
        .staff-card-inner { position: relative; width: 100%; height: 480px; transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275); transform-style: preserve-3d; }
        
        .is-jumping-to-back { animation: jumpFlipBack 0.8s cubic-bezier(0.25, 0.8, 0.25, 1) forwards; }
        .is-jumping-to-front { animation: jumpFlipFront 0.8s cubic-bezier(0.25, 0.8, 0.25, 1) forwards; }

        @keyframes jumpFlipBack {
            0% { transform: translateY(0) rotateY(0deg); }
            50% { transform: translateY(-120px) rotateY(90deg) scale(1.1); }
            100% { transform: translateY(0) rotateY(180deg); }
        }
        @keyframes jumpFlipFront {
            0% { transform: translateY(0) rotateY(180deg); }
            50% { transform: translateY(-120px) rotateY(90deg) scale(1.1); }
            100% { transform: translateY(0) rotateY(0deg); }
        }

        .staff-face { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; border-radius: 2rem; overflow: hidden; display: flex; flex-direction: column; box-shadow: 0 10px 20px rgba(0,0,0,0.15); border-bottom: 8px solid #32D74B; background: rgba(255,255,255,0.8); backdrop-filter: blur(8px); }
        .staff-face-back { transform: rotateY(180deg); border-bottom-color: #FF3B30; }

        .staff-img { width: 100%; height: 220px; object-fit: cover; background: #eee; }
        .staff-info { padding: 20px; flex-grow: 1; display: flex; flex-direction: column; justify-content: center; overflow-y: auto; }
        
        .staff-name { font-size: 1.5rem; font-weight: bold; text-align: center; margin-bottom: 15px; }
        .q-box { margin-bottom: 12px; }
        .q-label { font-size: 0.8rem; color: #fff; padding: 3px 10px; border-radius: 12px; display: inline-block; margin-bottom: 6px; }
        .q-val { font-size: 0.95rem; font-weight: bold; color: #444; white-space: pre-wrap; line-height: 1.4; }
        .tap-hint { position: absolute; top: 10px; right: 10px; background: rgba(255,255,255,0.9); padding: 5px 12px; border-radius: 20px; font-size: 0.8rem; font-weight: bold; animation: bounce-soft 1.5s infinite; z-index: 10; pointer-events: none; color: #32D74B; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    </style>
</head>
<body class="fixed-bg-container">

    <header style="text-align: center; padding: 50px 20px 20px;">
        <h1 class="text-stroke-white text-shadow-heavy dancing-text" style="color: #32D74B; font-size: 2.5rem;">æ„‰å¿«ãªã‚¹ã‚¿ãƒƒãƒ•ãŸã¡ï¼</h1>
        <p style="font-weight: bold; margin-top: 10px; background: rgba(255,255,255,0.6); display: inline-block; padding: 5px 15px; border-radius: 20px;">ã‚«ãƒ¼ãƒ‰ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨â€¦ï¼ï¼Ÿ</p>
    </header>

    <main id="staff-app" class="staff-grid">
        <p style="text-align:center; width:100%; font-weight:bold;">ã‚¹ã‚¿ãƒƒãƒ•æƒ…å ±ã‚’èª­ã¿è¾¼ã¿ä¸­...ğŸš€</p>
    </main>

    <script>
        // â–¼â–¼ æ–°ã—ã„ãƒªãƒã‚¸ãƒˆãƒªã®URLã«å¤‰æ›´ã—ã¦ãã ã•ã„ï¼ â–¼â–¼
        const GITHUB_JSON_URL = "https://kbperk.github.io/kb-park-staff/staffData.json"; 

        document.addEventListener('DOMContentLoaded', async () => {
            try {
                const res = await fetch(GITHUB_JSON_URL + '?v=' + new Date().getTime());
                if (!res.ok) throw new Error("Network response was not ok");
                const staffData = await res.json();
                renderStaff(staffData);
            } catch (err) {
                console.error(err);
                document.getElementById('staff-app').innerHTML = '<p style="text-align:center; width:100%; color:red; font-weight:bold;">ã‚¹ã‚¿ãƒƒãƒ•æƒ…å ±ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸğŸ™‡â€â™‚ï¸<br>ç®¡ç†ç”»é¢ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’ä¸€åº¦ä¿å­˜ã—ã¦ãã ã•ã„ã€‚</p>';
            }
        });

        function renderStaff(data) {
            const container = document.getElementById('staff-app');
            container.innerHTML = "";

            let count = 0;
            data.forEach((staff, index) => {
                if(!staff.name) return;
                count++;

                const delay = index * 100;
                const f = staff.front || {};
                const b = staff.back || {};

                const cardHTML = `
                <div class="staff-card-container js-scroll fade-up" style="transition-delay: ${delay}ms;" onclick="flipCard(this)">
                    <div class="staff-card-inner">
                        <div class="staff-face glass-panel-light">
                            <div class="tap-hint">ğŸ‘† ã‚¿ãƒƒãƒ—ï¼</div>
                            <img src="${f.image || 'https://via.placeholder.com/400x300?text=No+Image'}" class="staff-img" alt="${staff.name}">
                            <div class="staff-info">
                                <div class="staff-name text-stroke-white" style="color: #32D74B;">${staff.name}</div>
                                <div class="q-box">
                                    <div class="q-label" style="background: #32D74B;">${f.q1_label || 'ã‚­ãƒ£ãƒƒãƒã‚³ãƒ”ãƒ¼'}</div>
                                    <div class="q-val">${f.q1_val || ''}</div>
                                </div>
                                <div class="q-box">
                                    <div class="q-label" style="background: #32D74B;">${f.q2_label || 'è‡ªå·±ç´¹ä»‹'}</div>
                                    <div class="q-val">${f.q2_val || ''}</div>
                                </div>
                            </div>
                        </div>
                        <div class="staff-face staff-face-back glass-panel-light">
                            <img src="${b.image || 'https://via.placeholder.com/400x300?text=No+Image'}" class="staff-img" alt="${staff.name}ã®è£ã®é¡”">
                            <div class="staff-info">
                                <div class="staff-name text-stroke-white" style="color: #FF3B30;">${staff.name} (è£)</div>
                                <div class="q-box">
                                    <div class="q-label" style="background: #FF3B30;">${b.q1_label || 'è£ã®é€šã‚Šå'}</div>
                                    <div class="q-val">${b.q1_val || ''}</div>
                                </div>
                                <div class="q-box">
                                    <div class="q-label" style="background: #FF3B30;">${b.q2_label || 'ãŠãµã–ã‘ã‚³ãƒ¡ãƒ³ãƒˆ'}</div>
                                    <div class="q-val">${b.q2_val || ''}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                `;
                container.insertAdjacentHTML('beforeend', cardHTML);
            });

            if (count === 0) {
                 container.innerHTML = '<p style="text-align:center; width:100%;">ã‚¹ã‚¿ãƒƒãƒ•æƒ…å ±ãŒã¾ã ç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</p>';
            }
            
            if(typeof initScrollAnimations === 'function') initScrollAnimations();
            if(typeof initDancingText === 'function') initDancingText();
        }

        function flipCard(element) {
            const inner = element.querySelector('.staff-card-inner');
            inner.classList.remove('is-jumping-to-back', 'is-jumping-to-front');
            void inner.offsetWidth; 
            if (element.dataset.flipped === "true") {
                inner.classList.add('is-jumping-to-front');
                element.dataset.flipped = "false";
            } else {
                inner.classList.add('is-jumping-to-back');
                element.dataset.flipped = "true";
            }
        }
    </script>
</body>
</html>