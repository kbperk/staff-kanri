<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KB PARK | ã‚¹ã‚¿ãƒƒãƒ•ç´¹ä»‹</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .staff-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 30px; padding: 20px; max-width: 1000px; margin: 0 auto; }
        
        /* ãƒˆãƒ©ãƒ³ãƒãƒªãƒ³ãƒ•ãƒªãƒƒãƒ—ã®3Dè¨­å®š */
        .staff-card-container { perspective: 1000px; cursor: pointer; -webkit-tap-highlight-color: transparent; }
        .staff-card-inner { position: relative; width: 100%; height: 450px; transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275); transform-style: preserve-3d; }
        
        /* ã‚¸ãƒ£ãƒ³ãƒ—ï¼†ãƒ•ãƒªãƒƒãƒ— ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        .is-jumping-to-back { animation: jumpFlipBack 0.8s cubic-bezier(0.25, 0.8, 0.25, 1) forwards; }
        .is-jumping-to-front { animation: jumpFlipFront 0.8s cubic-bezier(0.25, 0.8, 0.25, 1) forwards; }

        @keyframes jumpFlipBack {
            0% { transform: translateY(0) rotateY(0deg); }
            50% { transform: translateY(-120px) rotateY(90deg) scale(1.1); }
            100% { transform: translateY(0) rotateY(180deg); }
        }
        @keyframes jumpFlipFront {
            0% { transform: translateY(0) rotateY(180deg); }
            50% { transform: translateY(-120px) rotateY(90deg) scale(1.1); }
            100% { transform: translateY(0) rotateY(0deg); }
        }

        /* è¡¨ã¨è£ã®å…±é€šã‚¹ã‚¿ã‚¤ãƒ« */
        .staff-face { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; border-radius: 2rem; overflow: hidden; display: flex; flex-direction: column; box-shadow: 0 10px 20px rgba(0,0,0,0.15); border-bottom: 8px solid #32D74B; }
        .staff-face-back { transform: rotateY(180deg); border-bottom-color: #FF3B30; } /* è£ã¯èµ¤ãƒ©ã‚¤ãƒ³ */

        .staff-img { width: 100%; height: 220px; object-fit: cover; background: #eee; }
        .staff-info { padding: 20px; flex-grow: 1; display: flex; flex-direction: column; justify-content: center; }
        
        .staff-name { font-size: 1.5rem; font-weight: bold; text-align: center; margin-bottom: 15px; }
        .q-box { margin-bottom: 10px; }
        .q-label { font-size: 0.8rem; color: #fff; background: #333; padding: 2px 8px; border-radius: 12px; display: inline-block; margin-bottom: 4px; }
        .q-val { font-size: 1rem; font-weight: bold; color: #444; }

        .tap-hint { position: absolute; top: 10px; right: 10px; background: rgba(255,255,255,0.8); padding: 5px 10px; border-radius: 20px; font-size: 0.8rem; font-weight: bold; animation: bounce-soft 1.5s infinite; z-index: 10; pointer-events: none;}
    </style>
</head>
<body class="fixed-bg-container">

    <header style="text-align: center; padding: 50px 20px 20px;">
        <h1 class="text-stroke-white text-shadow-heavy dancing-text" style="color: #32D74B; font-size: 2.5rem;" data-cms-text="æ„‰å¿«ãªã‚¹ã‚¿ãƒƒãƒ•ãŸã¡ï¼">æ„‰å¿«ãªã‚¹ã‚¿ãƒƒãƒ•ãŸã¡ï¼</h1>
        <p style="font-weight: bold; margin-top: 10px;">ã‚«ãƒ¼ãƒ‰ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨â€¦ï¼ï¼Ÿ</p>
    </header>

    <main id="staff-app" class="staff-grid">
        </main>

    <script>
        const GITHUB_JSON_URL = "https://ã‚ãªãŸã®ãƒ¦ãƒ¼ã‚¶ãƒ¼å.github.io/ã‚ãªãŸã®ãƒªãƒã‚¸ãƒˆãƒª/staffData.json"; // â˜…è¦å¤‰æ›´

        document.addEventListener('DOMContentLoaded', async () => {
            try {
                // ã‚­ãƒ£ãƒƒã‚·ãƒ¥å›é¿ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ã¤ã‘ã¦JSONã‚’å–å¾—
                const res = await fetch(GITHUB_JSON_URL + '?v=' + new Date().getTime());
                const staffData = await res.json();
                renderStaff(staffData);
            } catch (err) {
                document.getElementById('staff-app').innerHTML = '<p style="text-align:center; width:100%;">ã‚¹ã‚¿ãƒƒãƒ•æƒ…å ±ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚</p>';
            }
        });

        function renderStaff(data) {
            const container = document.getElementById('staff-app');
            container.innerHTML = "";

            data.forEach((staff, index) => {
                if(!staff.name) return; // ç©ºæ ã¯ã‚¹ã‚­ãƒƒãƒ—

                const delay = index * 100;
                const f = staff.front;
                const b = staff.back;

                const cardHTML = `
                <div class="staff-card-container js-scroll fade-up" style="transition-delay: ${delay}ms;" onclick="flipCard(this)">
                    <div class="staff-card-inner">
                        <div class="staff-face glass-panel-light">
                            <div class="tap-hint">ğŸ‘† ã‚¿ãƒƒãƒ—ï¼</div>
                            <img src="${f.image || 'placeholder.jpg'}" class="staff-img" alt="${staff.name}">
                            <div class="staff-info">
                                <div class="staff-name text-stroke-white" style="color: #32D74B;">${staff.name}</div>
                                <div class="q-box">
                                    <div class="q-label" style="background: #32D74B;">${f.q1_label}</div>
                                    <div class="q-val">${f.q1_val}</div>
                                </div>
                                <div class="q-box">
                                    <div class="q-label" style="background: #32D74B;">${f.q2_label}</div>
                                    <div class="q-val">${f.q2_val}</div>
                                </div>
                            </div>
                        </div>

                        <div class="staff-face staff-face-back glass-panel-light">
                            <img src="${b.image || 'placeholder.jpg'}" class="staff-img" alt="${staff.name}ã®è£ã®é¡”">
                            <div class="staff-info">
                                <div class="staff-name text-stroke-white" style="color: #FF3B30;">${staff.name} (è£)</div>
                                <div class="q-box">
                                    <div class="q-label" style="background: #FF3B30;">${b.q1_label}</div>
                                    <div class="q-val">${b.q1_val}</div>
                                </div>
                                <div class="q-box">
                                    <div class="q-label" style="background: #FF3B30;">${b.q2_label}</div>
                                    <div class="q-val">${b.q2_val}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                `;
                container.insertAdjacentHTML('beforeend', cardHTML);
            });
            
            // main.js ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åˆæœŸåŒ–é–¢æ•°ãŒã‚ã‚Œã°å‘¼ã³å‡ºã™
            if(typeof initScrollAnimations === 'function') initScrollAnimations();
        }

        // ã‚¸ãƒ£ãƒ³ãƒ—ï¼†ãƒ•ãƒªãƒƒãƒ—ã®åˆ¶å¾¡
        function flipCard(element) {
            const inner = element.querySelector('.staff-card-inner');
            
            // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒªã‚»ãƒƒãƒˆ
            inner.classList.remove('is-jumping-to-back', 'is-jumping-to-front');
            void inner.offsetWidth; // ãƒªãƒ•ãƒ­ãƒ¼ã‚’å¼·åˆ¶ã—ã¦ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å†èµ·å‹•

            if (element.dataset.flipped === "true") {
                inner.classList.add('is-jumping-to-front');
                element.dataset.flipped = "false";
            } else {
                inner.classList.add('is-jumping-to-back');
                element.dataset.flipped = "true";
            }
        }
    </script>
</body>
</html>